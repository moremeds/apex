# CPCV Validation Example
#
# Demonstrates:
# - Combinatorial Purged Cross-Validation for robust PBO estimation
# - Secondary validation method alongside walk-forward
# - More granular parameter space
#
# CPCV with n_groups=8, n_test_groups=2 generates C(8,2)=28 paths
# This provides a more robust estimate of strategy performance distribution.
#
# Run with:
#   python -m src.runners.systematic_backtest_runner --spec config/backtest/examples/02_cpcv_validation.yaml

name: "CPCV_Validation_Example"
description: "MA crossover with CPCV secondary validation for PBO calculation"
strategy: "ma_cross"

# Smaller parameter space for CPCV (more compute-intensive)
parameters:
  fast_period:
    type: range
    min: 10
    max: 30
    step: 10      # Only 3 values: 10, 20, 30
  slow_period:
    type: range
    min: 50
    max: 100
    step: 25      # Only 3 values: 50, 75, 100

universe:
  type: static
  symbols:
    - AAPL
    - MSFT
    - GOOGL
    - AMZN
    - META

temporal:
  # Primary: Walk-forward for main optimization
  primary_method: walk_forward
  train_days: 252
  test_days: 63
  folds: 4
  purge_days: 5
  embargo_days: 2

  # Secondary: CPCV for PBO calculation
  secondary_method: cpcv
  cpcv_groups: 8            # Split data into 8 groups
  cpcv_test_groups: 2       # C(8,2) = 28 paths

  start_date: "2020-01-01"
  end_date: "2025-12-30"

optimization:
  method: grid
  metric: sharpe
  direction: maximize
  constraints:
    - metric: p10_sharpe
      operator: ">="
      value: 0.0
    - metric: median_max_dd
      operator: "<="
      value: 0.20

profiles:
  validation:
    name: realistic
    version: v1
    slippage_bps: 10.0
    commission_per_share: 0.01
    fill_model: vwap

reproducibility:
  random_seed: 42
  data_version: "apex_2024.12"
