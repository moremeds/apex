# TrendPulse Strategy - ZigZag + DualMACD Confluence Trend Following
#
# Tier 1 strategy: Buy confirmed uptrends with multi-indicator confluence.
# Uses ZigZag swing detection + DualMACD momentum + ADX chop filter.
#
# Run with:
#   python -m src.backtest.runner --strategy trend_pulse --symbols AAPL NVDA MSFT --start 2022-01-01 --end 2025-06-30
#   python -m src.backtest.runner --spec config/backtest/playbook/trend_pulse.yaml

name: "TrendPulse_Backtest"
description: "ZigZag + DualMACD confluence trend following with regime gating"
strategy: "trend_pulse"

parameters:
  # Frozen structural params (use YAML defaults)
  cooldown_bars:
    type: fixed
    value: 5
  risk_per_trade_pct:
    type: fixed
    value: 0.05
  # Optimizable params (matches strategy_objective.py _build_param_space)
  zig_threshold_pct:
    type: range
    min: 1.5
    max: 5.0
    step: 0.5
  trend_strength_moderate:
    type: range
    min: 0.10
    max: 0.30
    step: 0.05
  min_confidence:
    type: range
    min: 0.2
    max: 0.6
    step: 0.05
  hard_stop_pct:
    type: range
    min: 0.10
    max: 0.20
    step: 0.02
  atr_stop_mult:
    type: range
    min: 3.0
    max: 6.0
    step: 0.5
  exit_bearish_bars:
    type: range
    min: 2
    max: 5
    step: 1
  adx_entry_min:
    type: range
    min: 10
    max: 25
    step: 5

secondary_timeframes: [1W]

universe:
  type: static
  symbols:
    - AAPL
    - NVDA
    - MSFT
    - AMZN
    - GOOGL

temporal:
  primary_method: walk_forward
  train_days: 504
  test_days: 126
  folds: 4
  purge_days: 5
  embargo_days: 2
  start_date: "2020-01-01"
  end_date: "2025-06-30"

optimization:
  method: bayesian
  metric: sharpe
  direction: maximize
  n_trials: 50
  constraints:
    - metric: p10_sharpe
      operator: ">="
      value: 0.0
    - metric: median_max_dd
      operator: "<="
      value: 0.20

profiles:
  default:
    name: tier_a
    version: v1
    slippage_bps: 5.0
    commission_per_share: 0.005
    fill_model: close
  conservative:
    name: tier_b
    version: v1
    slippage_bps: 15.0
    commission_per_share: 0.005
    fill_model: next_open

reproducibility:
  random_seed: 42
  data_version: "apex_2025.01"
