name: squeeze_play
tier: "TIER 1"
module_path: "src.domain.strategy.signals.squeeze_play"
class_name: "SqueezePlaySignalGenerator"

# Current best parameters — used by all runners, playbooks, signal generators
params:
  # Frozen structure params — define squeeze geometry, DO NOT optimize
  bb_period: 20        # frozen
  bb_std: 2.0          # frozen
  kc_multiplier: 1.5   # frozen
  # Tunable filters
  release_persist_bars: 3   # require 3 bars of confirmed release
  close_outside_bars: 2     # was 3 → reverted to 2 (3 consecutive bars outside expanding BB is nearly impossible)
  atr_stop_mult: 2.5
  adx_min: 20.0             # was 25 → reverted to 20 (many valid squeezes break out with ADX 18-22)
  hard_stop_pct: 0.08
  max_hold_bars: 40         # was hardcoded 30 → parameterized and extended for post-squeeze trends
  risk_per_trade_pct: 0.05

# Parameter iteration history (most recent first)
history:
  - version: "v1.2-entry-fix"
    date: "2026-02-08"
    source: "Dashboard analysis — 12 trades/10 symbols root cause: persistence + ADX over-filtered"
    changes:
      - "close_outside_bars 3 → 2 (3 consecutive bars outside expanding BB is nearly impossible)"
      - "adx_min 25 → 20 (valid breakouts from consolidation have ADX 18-22)"
      - "max_hold_bars 30 → 40 (post-squeeze trends need 4-6 weeks to develop)"
      - "hard_stop_pct and max_hold_bars parameterized from YAML (were hardcoded)"
    params:
      close_outside_bars: 2
      adx_min: 20.0
      max_hold_bars: 40
      hard_stop_pct: 0.08
    reason: "Combined persistence filter (release AND outside BB for 3+ bars each) with strict ADX 25 resulted in only 12 trades across 10 symbols; relaxing outside_bars and ADX should increase entry count 3-5x"

  - version: "v1.1-tighten"
    date: "2026-02-08"
    source: "Phase B3 hardening"
    params:
      release_persist_bars: 3
      close_outside_bars: 3
      adx_min: 25.0
    reason: "Reduce false breakouts from 943 trades — over-corrected"

  - version: "v1.0-manual"
    date: "2025-12-01"
    source: "Hand-tuned initial params"
    params:
      bb_period: 20
      bb_std: 2.0
      kc_multiplier: 1.5
      release_persist_bars: 2
      close_outside_bars: 2
      atr_stop_mult: 2.5
      adx_min: 20.0
      hard_stop_pct: 0.08
    reason: "Initial hand-tuned params"
