# Signal Service Nightly Profile
#
# Full validation including performance + parallel safety
# Runs on Python 3.13 with TA-Lib
#
# Usage:
#   python -m src.verification.signal_verifier --all --profile signal_nightly

profile: "nightly"
description: "Full signal service validation including performance"

# Run ALL checks
checks:
  # S1: Discovery & Metadata
  - S1_REGISTRY
  - S1_METADATA

  # S2: Determinism & Causality
  - S2_DETERMINISTIC
  - S2_PARALLEL_SAFE      # Include slow parallel test
  - S2_MOMENTUM_CAUSALITY
  - S2_TREND_CAUSALITY

  # S3: Semantic Invariants
  - S3_RSI_BOUNDS
  - S3_ADX_BOUNDS
  - S3_ATR_NONNEG
  - S3_MACD_IDENTITY
  - S3_NO_NAN

  # S4: Golden Fixtures
  - S4_MOMENTUM_SNAP
  - S4_TREND_SNAP

  # S5: Output Contract
  - S5_INDICATOR_SCHEMA
  - S5_PAYLOAD_SCHEMA
  - S5_ROUNDTRIP
  - S5_STABLE_ORDER

  # S6: Performance
  - S6_PERF

# No skips in nightly
skip: []

# Fail behavior
fail_action: "block_merge"

# Performance thresholds (more strict for nightly)
performance:
  warning_pct: 20
  fail_pct: 50

# Expected runtime
expected_runtime_seconds: 300
